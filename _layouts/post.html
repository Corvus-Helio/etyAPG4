---
layout: default
---
{%- if page.parent -%}
	{%- assign page_number = page.slug | plus: 0 -%}
	{%- for post in site.posts -%}
  	{%- if post.col_name == page.parent -%}
  		{%- assign parent_post = post -%}
		{%- endif -%}
	{%- endfor -%}
	{%- assign toc_setting = parent_post.toc -%}
	{%- assign collection_name = page.parent -%}
	{%- assign page_category = parent_post.category -%}
{%- elsif page.col_name -%}
	{%- assign page_number = 1 -%}
	{%- assign parent_post = page -%}
	{%- assign collection_name = page.col_name -%}
	{%- assign toc_setting = page.toc -%}
	{%- assign page_category = page.category -%}
{%- else  -%}
	{%- assign toc_setting = 'no' -%}
	{%- assign page_category = page.category -%}
{%- endif -%}


{%- assign start = page_number | minus: 2 -%}
{%- assign end = page_number | plus: 2 -%}

{%- assign collection = site.multipage | where: 'parent', collection_name -%}
{%- assign total_number_pages = collection.size  | plus: 1-%}

{%- if start < 1 -%}
  {%- assign start = 1 -%}
  {%- assign end = start | plus: 4 -%}
{%- elsif end > total_number_pages -%}
  {%- assign start = total_number_pages | minus: 4 -%}
  {%- assign end = total_number_pages -%}
{%- endif -%}

{%- if start < 1 -%}
  {%- assign start = 1 -%}
{%- endif -%}
{%- if end > total_number_pages -%}
  {%- assign end = total_number_pages -%}
{%- endif -%}
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
{%- if toc_setting != 'no' -%}
<div class='side-bar' id = 'tgMenu'>
	<div id="toc">{%- include toc_logic.html html=content -%}
	</div>
</div>
		<div class="dropdown">
			<button class="dropdown-button" id="tg-button" onclick="toggle_toc()">
			<div class='bar-div'></div>
			<div class='bar-div'></div>
			<div class='bar-div'></div>
		</button>
		</div>
{%- endif -%}

		<div class="page-heading" style="font-weight:300;margin-bottom:0.1em;">
			<a href="{{ site.baseurl }}/hippocampus" style="color:#828282;">海马体 /</a>
		</div>
		<header class="small-bottom-margin post-header">
		<div class="post-title" itemprop="name headline">
			{%- if page.parent or page.col_name -%}
				{{ parent_post.title | escape }}
			{%- else -%}
				{{ page.title | escape }}
			{%- endif -%}
		</div>

		<div class="large-top-margin large-bottom-margin post-meta">
			{% if page_category %}
				{% for folder in site.folders %}
					{% if folder.cat == page_category %}
					{% assign fold = folder %}
					{% endif %}
				{% endfor %}
				<a href="{{ site.baseurl }}{{ fold.url }}">{{ fold.cat }}</a>.
			{% endif %}
			{%- if page.parent or page.col_name -%}
			首发于 <time datetime="{{ parent_post.date | date_to_xmlschema }}" itemprop="datePublished">{{ parent_post.date | date: "%b %-d, %Y" }}</time>
			{%- if parent_post.modified -%}，最后修改于 {{ parent_post.modified | date: "%b %-d, %Y" }}{%- endif -%}. 有分页：
			{%- else -%}
			首发于 <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">{{ page.date | date: "%b %-d, %Y" }}</time>
			{%- if page.modified -%}，最后修改于 {{ page.modified | date: "%b %-d, %Y" }}{%- endif -%}
			{%- endif -%}
		</div>

		</header>

<body>
{%- if page.parent or page.col_name -%}
<div class="small-top-margin large-bottom-margin nav-box">
{%- include post_pagination_logic.html -%}
</div>
{%- endif -%}

<div class="maintext" itemprop="articleBody">
 	{%- assign cont = content -%}
	{%- if toc_setting != 'no' -%}
		{%- include anchor_injection.html html=cont -%}
	{%- endif -%}

	{%- if page.math -%}
		{%- include theorem_injection.html html=cont -%}
	{%- endif -%}

	{{ cont }}
</div>

{%- if page.parent or page.col_name -%}
<div class="large-top-margin nav-box">
{%- include post_pagination_logic.html -%}
</div>
{%- endif -%}

{%- if page.parent or page.col_name -%}
<div class = 'large-top-margin nav-box'>
{%- if parent_post.previous.url -%}
<div class="prev page-block">
<a href="{{ site.baseurl }}/{{parent_post.previous.url}}">
<span class='arrow left'></span> {{parent_post.previous.title}}
</a>
</div>
{%- endif -%}

{%- if parent_post.next.url -%}
<div class="next page-block">
<a href="{{ site.baseurl }}/{{parent_post.next.url}}">
{{parent_post.next.title}} <span class='arrow right'></span>
</a>
</div>

{%- endif -%}
</div>
{%- else -%}
<div class = 'large-top-margin nav-box'>
{%- if page.previous.url -%}
<div class="prev page-block">
<a href="{{ site.baseurl }}/{{page.previous.url}}">
<span class='arrow left'></span> {{page.previous.title}}
</a>
</div>
{%- endif -%}
{%- if page.next.url -%}
<div class="next page-block">
<a href="{{ site.baseurl }}/{{page.next.url}}">
{{page.next.title}} <span class='arrow right'></span>
</a>
</div>

{%- endif -%}
</div>
{%- endif -%}



{%- if toc_setting != 'no' -%}
	{%- include toc_toggle.html -%}
{%- endif -%}

{%- if page.math -%}
 	{%- include math.html -%}
{%- endif -%}

{%- if page.gallery == 'yes' -%}
	{%- include lazyload.html -%}
{%- endif -%}

    {%- if site.disqus.shortname -%} {%- include disqus_comments.html -%} {%- endif -%}
</body>
	</article>
