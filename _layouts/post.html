---
layout: default
---
{%- if page.parent -%}
	{%- assign page_number = page.slug | plus: 0 -%}
	{%- for post in site.posts -%}
  	{%- if post.col_name == page.parent -%}
  		{%- assign parent_post = post -%}
		{%- endif -%}
	{%- endfor -%}
	{%- assign collection_name = page.parent -%}
	{%- assign page_category = parent_post.category -%}
{%- elsif page.col_name -%}
	{%- assign page_number = 1 -%}
	{%- assign parent_post = page -%}
	{%- assign collection_name = page.col_name -%}
	{%- assign page_category = page.category -%}
{%- else  -%}
	{%- assign parent_post = page -%}
	{%- assign page_category = page.category -%}
{%- endif -%}

{%- if content contains '</h1>' -%}
	{%- assign toc_setting = true -%}
{%- endif -%}
{%- if content contains '$$' or page.math == 1 -%}
	{%- assign math_setting = true -%}
{%- endif -%}
{%- if content contains '<img' -%}
	{%- assign img_setting = true -%}
{%- endif -%}

{%- assign start = page_number | minus: 2 -%}
{%- assign end = page_number | plus: 2 -%}

{%- assign collection = site.multipage | where: 'parent', collection_name -%}
{%- assign total_number_pages = collection.size  | plus: 1 -%}

{%- if start < 1 -%}
  {%- assign start = 1 -%}
  {%- assign end = start | plus: 4 -%}
{%- elsif end > total_number_pages -%}
  {%- assign start = total_number_pages | minus: 4 -%}
  {%- assign end = total_number_pages -%}
{%- endif -%}

{%- if start < 1 -%}
  {%- assign start = 1 -%}
{%- endif -%}
{%- if end > total_number_pages -%}
  {%- assign end = total_number_pages -%}
{%- endif -%}



<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<header class="small-bottom-margin post-header">
		<a class='page-heading-nav' href="{{ site.baseurl }}/hippocampus">海马体</a><span class='page-heading-nav'> /</span>
		<div class="post-title" itemprop="name headline">
			{%- if page.parent or page.col_name -%}
				{{ parent_post.title | escape }}
			{%- else -%}
				{{ page.title | escape }}
			{%- endif -%}
		</div>

		<div class="medium-top-margin large-bottom-margin page-meta">
			{% if page_category %}
				{% for folder in site.folders %}
					{% if folder.cat == page_category %}
					{% assign fold = folder %}
					{% endif %}
				{% endfor %}
				<a class='folder-link' href="{{ site.baseurl }}{{ fold.url }}">{{ fold.cat }}</a>
			{% endif %}
			{%- if page.parent or page.col_name -%}
			&nbsp; &nbsp; 首发：<time datetime="{{ parent_post.date | date_to_xmlschema }}" itemprop="datePublished"><span class='serif'>{{ parent_post.date | date: "%Y-%m-%d" }}</span></time>
			{%- if parent_post.modified -%} &nbsp; &nbsp; 修改：<span class='serif'>{{ parent_post.modified | date: "%Y-%m-%d" }}</span>{%- endif -%}
			{%- else -%}
			&nbsp; &nbsp; 首发：<time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished"><span class='serif'>{{ page.date | date: "%Y-%m-%d" }}</span></time>
			{%- if page.modified -%} &nbsp; &nbsp; 修改：<span class='serif'>{{ page.modified | date: "%Y-%m-%d" }}</span>{%- endif -%}
			{%- endif -%}
		</div>
		</header>

<body>

	{%- if toc_setting -%}
	{%- include toc_logic.html html=content -%}
	{%- endif -%}


	{%- if page.parent or page.col_name -%}
	<div class="large-bottom-margin page-block-collection">
	{%- include post_pagination_logic.html -%}
	</div>
	{%- endif -%}


<div class="post-text" itemprop="articleBody">
 	{%- assign cont = content -%}
	{%- if toc_setting -%}
		{%- include anchor_injection.html html=cont -%}
	{%- endif -%}
	{%- if math_setting -%}
		{%- include theorem_injection.html html=cont -%}
	{%- endif -%}
	{{ cont }}
</div>

{%- if page.parent or page.col_name -%}
<div class="very-large-top-margin large-bottom-margin page-block-collection">
{%- include post_pagination_logic.html -%}
</div>
{%- endif -%}


{%- if page.parent or page.col_name -%}
<div class = 'large-top-margin nav-box'>
{%- else -%}
<div class = 'very-large-top-margin nav-box'>
{%- endif -%}

{%- if parent_post.previous.url -%}
<a class="prev small-font page-block" href="{{ site.baseurl }}/{{page.previous.url}}">
前：<span class='serif'>{{parent_post.previous.title}}</span>
</a>
{%- endif -%}

{%- if parent_post.next.url -%}
<a class="next small-font page-block" href="{{ site.baseurl }}/{{page.next.url}}">
后：<span class='serif'>{{parent_post.next.title}}</span>
</a>
{%- endif -%}

</div>




{%- if toc_setting -%}
	{%- include toc_toggle.html -%}
{%- endif -%}

{%- if math_setting -%}
 	{%- include math.html -%}
{%- endif -%}

{% if img_setting %}
	{%- include lazyload.html -%}
{%- endif -%}

    {%- if site.disqus.shortname -%} {%- include disqus_comments.html -%} {%- endif -%}
</body>
	</article>
